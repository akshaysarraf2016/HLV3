<VirtualHost *:443>

	ServerAdmin akshay.saraf1@st.com 
	DocumentRoot "/var/opt/apache/wwdc2/docs"
	ServerName hostlist.sgp.st.com:443 
	ServerAlias hostlist

	LogLevel		warn
	LogFormat		"%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
	LogFormat		"%h %l %u %t \"%r\" %>s %b" common
	LogFormat		"%{Referer}i -> %U" referer
	LogFormat		"%{User-agent}i" agent

	ErrorLog "/etc/httpd/logs/hostlist_v3-error_log"
        CustomLog "/etc/httpd/logs/hostlist_v3-access_log" common

	SSLEngine on
	SSLCertificateFile "/etc/httpd/conf.d/ssl/server.cer"
	SSLCertificateKeyFile "/etc/httpd/conf.d/ssl/server.key"
	#SSLCertificateChainFile "/etc/httpd/conf.d/ssl/ST_root_CA.crt"

	<FilesMatch "\.(cgi|shtml|phtml|php)$">
		SSLOptions +StdEnvVars
        </FilesMatch>

	<Directory "/var/opt/apache/wwdc2/docs">
		AllowOverride All
		Options Indexes FollowSymLinks Includes ExecCGI
		#Require all granted
	
		AuthType Basic
                AuthBasicProvider ldap
		AuthName "Please provide your Unified Login and Password"

		AuthLDAPURL "ldap://sgpdc01.st.com:389/ou=users,ou=dlh,ou=locations,dc=st,dc=com?sAMAccountName?sub?(objectClass=*)"
		AuthLDAPBindDN "cn=hostlist,ou=users,ou=dlh,ou=locations,dc=st,dc=com"
		AuthLDAPBindPassword "STc0nsHLV3"

		#AuthzLDAPAuthoritative off
		DirectoryIndex index.html index.php home.php

		#require valid-user
		require ldap-group cn=ICT_ITTI.sys_admin,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_ITTI.sys_tse,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_IOG_TSE_UNIX,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_ITTI.PSE,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_ITTI.API,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_IOG_ARTP_NOIDA,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_ITTI_ENGINEERING,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_BAISG,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_ITTI_PPC,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=HTTP_ITTI-OPS-NOIDA,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_IOG_TSE_WIN,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_ISG_DBA_NOIDA,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_IOG_TSE_OVO,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_IOG_BAIRM_SD,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_ISG_SAP_Basis,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require ldap-group cn=ICT_IOG_TSE_SNB,ou=Manual Groups,ou=GroupsManagement,dc=st,dc=com
		require user "groverk"
		require user "vashistr"
	</Directory>
	AddType image/x-icon .ico
</VirtualHost>
<VirtualHost *:80>
	ServerAdmin akshay.saraf1@st.com
        DocumentRoot "/var/www/html/HTTP"
        ServerName hostlist.sgp.st.com:80
        ServerAlias hostlist

	<Directory "/var/www/html/HTTP">
		AllowOverride All
                Options Indexes FollowSymLinks Includes ExecCGI
             	Require all granted 
	</Directory>
</VirtualHost>
